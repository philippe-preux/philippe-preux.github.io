<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Graphiques pour la science des données</title>
  <link href="https://philippe-preux.github.io/css/ma.css"
	rel="stylesheet" type="text/css" media="all" />
  <link rel="shortcut icon" type="image/x-icon" 
	href="https://philippe-preux.github.io/img/site.ico" />
</head>

<body>
<div class="tpR">

  <h1>Graphiques pour la science des données</h1>

  <p>
    
    Parce qu'un dessin vaut mieux qu'un long discours, la réalisation de graphiques est une activité très importante en science des données pour voir des caractéristiques des données.
    
    <br/>
      
    Ce TP a donc pour objectif de réaliser des graphiques simples permettant de visualiser différentes caractéristiques d'un jeu de données.
    On utilisera le paquetage <kbd>matplotlib</kbd>. Souvent, on le renomme <code>plt</code> au chargement.
      
    <br/>
    <br/>

    Remarque&nbsp;: il y a deux manières de réaliser des graphiques avec <kbd>matplotlib</kbd>. Dans un premier temps, nous allons présenter la méthode la plus simple qui permet de réaliser des graphiques simples. Nous verrons ensuite une autre méthode, à peine plus compliquée, qui permet de réaliser des graphiques bien plus riches et complexes.

    <br/>
    <br/>

    La documentation est en-ligne&nbsp;:

  </p>
  
  <ul>
    <li>sur le <a href="https://matplotlib.org/">site web de <kbd>matplotlib</kbd></a>.</li>
    <li>Voir en particulier les <a href="https://matplotlib.org/cheatsheets/">pense-bêtes</a></li>
    <li>et les <a href="https://matplotlib.org/stable/plot_types/index.html">exemples</a>.</li>
  </ul>

  <h2>Pré-requis</h2>

  <p>

    Ce TP est la suite du TP sur les tableaux de données. Celui-ci doit avoir été réalisé avant de commencer ce TP.

    <br/>

    Il faut donc charger le jeu de données dans un tableau de données avant de commencer.
    
  </p>
  
  <h2>Répartition des valeurs d'un attribut</h2>

  <h3>Premier essai</h3>
  
  <p>

    L'un des premiers types de graphiques que l'on réalise consiste à visualiser la répartition des valeurs des attributs.

    <br/>

    Commençons par
    <pre>olives.plot ()
plt.show()
</pre>

    <br/>

    ce qui donne :
    
  </p>

  <img src="olives-figure1.png"/>

  <p>

    On peut faire des remarques&nbsp;:

  </p>

  <ol>
    <li>on ne sait pas ce que cela représente, ni la figure dans son ensemble, ni les axes des abscisses et des ordonnées. Il faut ajouter des légendes.</li>
    <li>Ça représente la valeur de chaque donnée pour chacun des attributs. L'abscisse est le numéro de la donnée. Chaque attribut est représenté avec une couleur différente et une légende indique la correspondance entre couleur et attribut.</li>
    <li>On voit un attribut dont les valeurs sont très élevées (oleic), deux autres intermédiaires (palmitic et linoleic) et tous les autres mélangés tout en bas : on ne voit pas grand chose&nbsp;!</li>
    <li>Pour chaque attribut on voit une ligne qui zigzague. Traditionnellement, un graphique qui a cet aspect-là représente l'évolution au fil du temps de la valeur d'un attribut. Or, ce graphique ne représente pas du tout cela : comme dit ci-dessus, l'axe des abscisses représente l'indice de la donnée dans le tableau et en aucun cas ne représente une information temporelle. <strong>Ce graphique nous induit donc en erreur</strong>. C'est un énorme défaut pour un graphique que de ne pas représenter ce à quoi l'on s'attend. Un graphique est là pour aider à comprendre et donc, la dernière chose qu'il doit faire est de nous induire en erreur&nbsp;!</li>
  </ol>

  <p>

    En conclusion ce graphique est très mauvais. Malgré cela, on peut s'en servir comme base d'un exercice de réalisation de graphique en Python. En regardant la documentation, transformez-le dans le graphique ci-dessous auquel on a ajouté un titre général et des titres aux axes des abscisses et des ordonnées&nbsp;:

  </p>

  <img src="olives-figure2.png"/>

  <h3>Boîtes à moustaches (<i>Boxplots</i>)</h3>

  <p>

    Une manière d'obtenir une représentation qui a du sens, c'est-à-dire qui montre bien l'information que l'on veut montrer, consiste à utiliser une boîte à moustaches.

  </p>
    
  <pre>olives.plot.box (title = "Répartition des valeurs des attributs\n du jeu de données olives", xlabel = "Attribut", ylabel = "Répartition des valeurs de l'attribut")
plt.show()
</pre>

  <p>
    
    qui donne&nbsp;:
    
  </p>

    <img src="olives-figure3.png" width="250pt" />

  <p>

    On retrouve le même problème que précédemment, oleic ayant des valeurs bien supérieures aux autres attributs, et palmitic et linoleic étant eux-aussi bien plus grands que tous les autres attributs. Le plus simple est de faire trois graphiques.
    
  </p>

  <img src="olives-figure5.png" width="250pt" />
  <img src="olives-figure6.png" width="250pt" />
  <img src="olives-figure7.png" width="250pt" />

  <h3>Histogrammes</h3>

  <p>

    Un histogramme fournit beaucoup d'information sur la répartition des valeurs d'un attribut. Dans certains cas, on peut juger d'un coup d'&oelig;il que les valeurs ne sont pas distribuées uniformément ou normalement, ce qui est une information importante.

    <br/>

    On utilise pour cela la méthode <kbd>plot.hist (bins = ..., ...)</kbd>. Le paramètre <kbd>bins</kbd> indique la finesse de l'histogramme. Les autres paramètres sont à peu près les mêmes que pour <kbd>plot.box</kbd>.

    <br/>
    <br/>

    <b>À faire&nbsp;:</b> regardez la documentation et réalisez les 2x8 graphiques ci-dessous. Utilisez une boucle pour générer 8 graphiques d'un coup.
    
  </p>

  <img src="olives-figure-histo3.png" width="150pt" />
  <img src="olives-figure-histo4.png" width="150pt" />
  <img src="olives-figure-histo5.png" width="150pt" />

  <img src="olives-figure-histo6.png" width="150pt" />
  <img src="olives-figure-histo7.png" width="150pt" />
  <img src="olives-figure-histo8.png" width="150pt" />

  <img src="olives-figure-histo9.png" width="150pt" />
  <img src="olives-figure-histo10.png" width="150pt" />

  <h3>Estimation de la densité</h3>

  <p>

  </p>

  <img src="olives-figure-densite3.png" width="150pt" />
  <img src="olives-figure-densite4.png" width="150pt" />
  <img src="olives-figure-densite5.png" width="150pt" />

  <img src="olives-figure-densite6.png" width="150pt" />
  <img src="olives-figure-densite7.png" width="150pt" />
  <img src="olives-figure-densite8.png" width="150pt" />

  <img src="olives-figure-densite9.png" width="150pt" />
  <img src="olives-figure-densite10.png" width="150pt" />

  <h3>Remarques sur les histogrammes et l'estimation de la densité</h3>

  <p>

    Ces deux visualisations produisent des résultats qui se ressemblent&nbsp;: on retrouve les mêmes pics et creux. Néanmoins, elles sont à utiliser avec prudence&nbsp;: ni l'une ni l'autre ne représente une information parfaite. Si on peut se dire que les 4 premiers couples (histogramme, densité) se ressemblent, c'est beaucoup moins évidents pour les 4 suivants. Les histogrammes montrent des pics qui n'apparaissent pas dans les densités estimées. Ces pics isolés dans les histogrammes sont lissés dans les densités et disparaissent&nbsp;: existent-ils&nbsp;? Quelle méthode donne la visualisation la plus fidèle des données&nbsp;?

    <br/>
    <br/>

    L'allure de l'histogramme dépend fortement de la discrétisation utilisée (le paramètre <kbd>bins</kbd>), notamment si le nombre de données est faible par rapport à la discrétisation.
    
    <br/>

    Par ailleurs, il existe plusieurs manières de réaliser un histogramme, chacune donnant une certaine représentation de la distribution des valeurs d'un attribut.

    <br/>
    <br/>

    De même, la forme de la densité estimée varie selon les paramètres utilisés. Ici, on a utilisé les paramètres par défaut. Dans une application réelle, il faut ajuster les paramètres.
    
  </p>
  
  <h2>Visualisation de deux attributs</h2>

  <p>

    Une part très importante de la science des données consiste à trouver des relations entre des attibuts.
    Pour cela, on peut s'aider de visualisations graphiques.
    
  </p>

  <h3><i>Scatter plots</i></h3>

  <p>

    Un <i>scatter plot</i> est un graphique en 2 dimensions&nbsp;: chaque axe correspond à un attribut&nbsp;: on représente chaque donnée par un point défini par ces deux attributs.

    <br/>

    La méthode <kbd>plot.scatter()</kbd> s'applique à un <i>data frame</i> et crée un tel graphique&nbsp;: elle prend au moins deux paramètres&nbsp;: <kbd>x</kbd> et <kbd>y</kbd> qui indique les deux attributs à utiliser. On peut ajouter un titre et d'autres informations.

    <br/>

    <b>À faire&nbsp;:</b> faites un <i>scatter plot</i> pour les attributs <kbd>oleic</kbd> et <kbd>palmitic</kbd>. Vous devez obtenir ceci&nbsp;:

  </p>
    
  <img src="olives-palmitic-vs-oleic.png" width="500pt" />
    
  <p>

    Il est courant de donner des couleurs différentes aux données selon la valeur de l'un de leurs attributs. Par exemple, on pourrait donner des couleurs différentes en fonction de la région d'origine de l'olive, en utilisant pour cela l'attribut <kbd>region</kbd>.

    <br/>

    Le paramètre <kbd>c</kbd> indique l'attribut à utiliser (son nom ou son numéro) et le paramètre <kbd>colormap</kbd> indique la palette de couleur à utiliser (voir les palettes pré-définies sur <a href="https://matplotlib.org/stable/tutorials/colors/colormaps.html">cette page</a>).
    
  </p>

  <img src="olives-palmitic-vs-oleic-against-region.png" width="500pt" />

</div>

<!-- Default Statcounter code for on github
https://philippe-preux.github.io -->
<script type="text/javascript">
var sc_project=12923547; 
var sc_invisible=1; 
var sc_security="627600d4"; 
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js"
async></script>
<noscript><div class="statcounter"><a title="Web Analytics"
href="https://statcounter.com/" target="_blank"><img
class="statcounter"
src="https://c.statcounter.com/12923547/0/627600d4/1/"
alt="Web Analytics"
referrerPolicy="no-referrer-when-downgrade"></a></div></noscript>
  <!-- End of Statcounter Code -->
  
</body>
</html>
